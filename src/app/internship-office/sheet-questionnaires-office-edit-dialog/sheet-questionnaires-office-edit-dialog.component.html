<mat-dialog-content class="mat-typography">
  <form ngNativeValidate #studentEntryForm="ngForm" class="form-horizontal">
    <div class="alert alert-danger mt-3 mb-2" role="alert">
      Εδώ μπορείτε να δείτε τις απαντήσεις του φοιτητή και να επεξεργαστείτε τις περισσότερες από αυτές.
      Σημειώνεται ότι η επεξεργασία απαντήσεων δεν είναι η προτεινόμενη πρακτική, εκτός ειδικών περιπτώσεων.
    </div>
    <div id="exitSheetPreviewContent">
      <form ngNativeValidate #studentEvaluationForm="ngForm" class="form-horizontal" (ngSubmit)="onSubmitStudentEvaluationSheet(studentEvaluationForm.value)">
        <div *ngFor="let question of evaluation; let i = index" class="container-fluid row mb-3">

          <!-- Display titles before questions -->
          <ng-container>
            <!-- Depending on prefix of question_name, show specific title -->
            <h4 *ngIf="showSectionTitle(i, 'A')" class="text-danger mt-2 mb-3">A - Ερωτήσεις σχετικές με το υπόβαθρο</h4>
            <h4 *ngIf="showSectionTitle(i, 'B')" class="text-danger mt-2 mb-3">B - Ερωτήσεις σχετικές με το φορέα</h4>
            <h4 *ngIf="showSectionTitle(i, 'C')" class="text-danger mt-2 mb-3">C - Ερωτήσεις σχετικές με την Π.Α.</h4>
            <h4 *ngIf="showSectionTitle(i, 'D')" class="text-danger mt-2 mb-3">D - Βαθμός Ικανοποίησης από την Π.Α.</h4>
            <h4 *ngIf="showSectionTitle(i, 'E')" class="text-danger mt-2 mb-3">E - Οι προτάσεις μου</h4>
          </ng-container>

          <div class="col-12">
            <label [for]="question.id">
              <strong>{{ question.question_name }}.</strong>
            </label>
            <div *ngIf="!question.question_name.startsWith('B1') && !question.question_name.startsWith('C2')" [innerHTML]="question.question_text"></div>
          </div>

          <!-- SMALLINT Questions - Horizontal Layout with Full Labels -->
          <!-- Radio Buttons (SMALLINT) -->
          <div *ngIf="question.question_type === 'SMALLINT'" class="col-12">
            <mat-radio-group [(ngModel)]="answersMap[question.question_name]" [name]="question.question_name" [id]="question.question_name" required class="d-flex flex-wrap justify-content-start">
              <div class="d-flex align-items-center mr-4 mb-2">
                <mat-radio-button [value]="1" class="mr-1"></mat-radio-button>
                <span><strong>1.</strong> Διαφωνώ απόλυτα</span>
              </div>
              <div class="d-flex align-items-center mr-4 mb-2">
                <mat-radio-button [value]="2" class="mr-1"></mat-radio-button>
                <span><strong>2.</strong> Διαφωνώ</span>
              </div>
              <div class="d-flex align-items-center mr-4 mb-2">
                <mat-radio-button [value]="3" class="mr-1"></mat-radio-button>
                <span><strong>3.</strong> Ούτε διαφωνώ ούτε συμφωνώ</span>
              </div>
              <div class="d-flex align-items-center mr-4 mb-2">
                <mat-radio-button [value]="4" class="mr-1"></mat-radio-button>
                <span><strong>4.</strong> Συμφωνώ</span>
              </div>
              <div class="d-flex align-items-center mr-4 mb-2">
                <mat-radio-button [value]="5" class="mr-1"></mat-radio-button>
                <span><strong>5.</strong> Συμφωνώ απόλυτα</span>
              </div>
            </mat-radio-group>
          </div>

          <!-- Textarea (normal TEXT question) -->
          <div *ngIf="question.question_type === 'TEXT' && !(question.question_name.startsWith('B1') || question.question_name.startsWith('C2'))" class="col-12">
            <mat-form-field class="w-100" appearance="fill">
              <mat-label>Γράψτε εδώ</mat-label>
              <textarea matInput [(ngModel)]="answersMap[question.question_name]" [name]="question.question_name" [id]="question.question_name" placeholder="Αποτυπώστε την απάντησή σας" required></textarea>
            </mat-form-field>
          </div>

          <!-- Checkbox list (TEXT type with list e.g., B1, C2) -->
          <div *ngIf="question.question_type === 'TEXT' && (question.question_name.startsWith('B1') || question.question_name.startsWith('C2'))" class="col-12">
            <label>{{ extractTextBeforeList(question.question_text)}}</label>
            <div class="alert alert-info mt-2 mb-2">
              Σε αυτή την ερώτηση δεν μπορεί να αλλάξει η απάντηση του φοιτητή.
            </div>
            <ul class="list-unstyled mt-2">
              <li *ngFor="let option  of extractListItems(question.question_text)">
                <mat-checkbox [checked]="answersMap[question.question_name]?.includes(option)" [name]="question.question_name + '_' + option" disabled [value]="option">
                  <span style="font-weight: normal">{{ option }}</span>
                </mat-checkbox>
              </li>
            </ul>
          </div>
          <mat-divider class="mt-3 mb-3"></mat-divider>
        </div>
        <br>

        <button class="btn btn-primary">Αποθήκευση</button>
      </form>
    </div>
  </form>
</mat-dialog-content>
  